<!DOCTYPE html>
<html>
<head>
    <title>Restricted Page</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@latest"></script>
</head>
<body>
    <h1>Welcome to the Restricted Page</h1>
    <p>This page is restricted. You must be logged in to access it.</p>

    <script>
// Function to remove/reset authentication token
function resetAuthToken() {
    localStorage.removeItem('sb-tdsxayxnjomnoiestnmj-auth-token'); // Remove authToken from local storage
    // Redirect user to sign-in page after removing token
    window.location.href = 'sign-in.html';
}

// Function to check if the user is signed in
function checkAuthentication() {
    // Check if token exists in local storage
    const token = localStorage.getItem('sb-tdsxayxnjomnoiestnmj-auth-token');
    if (!token) {
        // If token doesn't exist, redirect user to sign-in page
        window.location.href = 'sign-in.html';
        return; // Exit function to prevent further execution
    }
    
    // Example: Check if token is valid (You should implement your own validation logic here)
    // For demonstration purposes, always consider the user as authenticated
    // In a real-world scenario, you would perform server-side validation of the token
    const isAuthenticated = true; // Change this according to your validation logic
    
    if (!isAuthenticated) {
        // If user is not authenticated, redirect user to sign-in page
        window.location.href = 'sb-tdsxayxnjomnoiestnmj-auth-token';
        return; // Exit function to prevent further execution
    }
}

// Call checkAuthentication function when the page loads
window.onload = checkAuthentication;
</script>
</body>
</html>
