<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password Reset - Send Code</title>
</head>
<body>
  <h2>Reset Password - Send Code</h2>
  <label for="email">Enter your email:</label>
  <input type="email" id="email" required>
  <button onclick="sendCodeByEmail()">Send Code</button>

  <script>
    async function sendCodeByEmail() {
      const email = document.getElementById('email').value;
      
      // Replace the following with your SMTP server configuration
      const smtpConfig = {
        host: 'smtp.resend.com',
        port: 587,
        secure: false, // Set to true if using SSL
        auth: {
          user: 'resend',
          pass: 're_BFEczQSd_5bBstcAJKb1Y8G3BT5jZEwFC'
        }
      };

      const nodemailer = require('nodemailer');
      const transporter = nodemailer.createTransport(smtpConfig);

      const code = Math.floor(100000 + Math.random() * 900000);
      localStorage.setItem('resetCode', code);

      const message = `Your verification code is: ${code}`;

      try {
        await transporter.sendMail({
          from: 'onboarding@resend.dev',
          to: email,
          subject: 'MN Games Password Reset Verification Code',
          text: message
        });

        console.log('Email sent successfully');
      } catch (error) {
        console.error('Error sending email:', error);
      }
    }
  </script>
</body>
</html>
